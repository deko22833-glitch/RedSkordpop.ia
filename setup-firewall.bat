@echo off
chcp 65001 >nul
title Redskord - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ Windows
color 0B

echo ============================================
echo    üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞ Windows
echo    Redskord Messenger
echo ============================================
echo.

REM –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
net session >nul 2>&1
if %ERRORLEVEL% NEQ 0 (
    echo [–û–®–ò–ë–ö–ê] –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞!
    echo.
    echo –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:
    echo 1. –ó–∞–∫—Ä–æ–π—Ç–µ —ç—Ç–æ –æ–∫–Ω–æ
    echo 2. –ü—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –ø–æ —Ñ–∞–π–ª—É - –ó–∞–ø—É—Å–∫ –æ—Ç –∏–º–µ–Ω–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
    echo.
    pause
    exit /b 1
)

echo [INFO] –ü—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã
echo.

set PORT=3000
set RULE_NAME=Redskord_Messenger_Port_%PORT%

echo [INFO] –û—Ç–∫—Ä—ã—Ç–∏–µ –ø–æ—Ä—Ç–∞ %PORT% –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ Windows...
echo.

REM –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä–æ–µ –ø—Ä–∞–≤–∏–ª–æ –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
netsh advfirewall firewall delete rule name="%RULE_NAME%" >nul 2>&1

REM –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
netsh advfirewall firewall add rule name="%RULE_NAME%" dir=in action=allow protocol=TCP localport=%PORT% >nul 2>&1
if %ERRORLEVEL% EQU 0 (
    echo [‚úì] –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
) else (
    echo [‚úó] –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
)

REM –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
netsh advfirewall firewall add rule name="%RULE_NAME%_Out" dir=out action=allow protocol=TCP localport=%PORT% >nul 2>&1
if %ERRORLEVEL% EQU 0 (
    echo [‚úì] –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π —Å–æ–∑–¥–∞–Ω–æ —É—Å–ø–µ—à–Ω–æ
) else (
    echo [‚úó] –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∏—Å—Ö–æ–¥—è—â–∏—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
)

echo.
echo ============================================
echo    ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!
echo ============================================
echo.
echo –ü–æ—Ä—Ç %PORT% –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ Windows.
echo –¢–µ–ø–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Port Forwarding –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ.
echo.
echo –î–ª—è —ç—Ç–æ–≥–æ:
echo 1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–æ—É—Ç–µ—Ä–∞ (–æ–±—ã—á–Ω–æ 192.168.1.1 –∏–ª–∏ 192.168.0.1)
echo 2. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "Port Forwarding" / "–ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤"
echo 3. –î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ:
echo    - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç: %PORT%
echo    - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç: %PORT%
echo    - –ü—Ä–æ—Ç–æ–∫–æ–ª: TCP
echo    - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP: (–≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π IP, —Å–º. –Ω–∏–∂–µ)
echo.
echo –í–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å:
ipconfig | findstr /i "IPv4"
echo.
pause

